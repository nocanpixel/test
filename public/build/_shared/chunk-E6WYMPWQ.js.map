{
  "version": 3,
  "sources": ["../../../app/hooks/useUserMetadata.ts"],
  "sourcesContent": ["// REMIX HMR BEGIN\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\nimport.meta.hot = __hmr__.createHotContext(\n//@ts-expect-error\n\"app/hooks/useUserMetadata.ts\"\n);\nimport.meta.hot.lastModified = \"1712808153530.0757\";\n}\n// REMIX HMR END\n\nimport { useOutletContext } from '@remix-run/react'\nimport { useQuery } from 'react-query'\n\ninterface UserMetadata {\n\tdisplayName: string\n\tfirstName?: string\n\tlastName?: string\n\ttimeZone?: string\n\tphotob64?: string\n}\n\nexport function useUserMetadata(email: string) {\n\tconst { userDirectoryUrl } = useOutletContext<{ userDirectoryUrl?: string }>()\n\tconst search = new URLSearchParams({ email })\n\n\tconst key = `${userDirectoryUrl}?${search}`\n\n\tconst initialData: UserMetadata = {\n\t\tdisplayName: email,\n\t}\n\n\treturn useQuery({\n\t\tinitialData,\n\t\tqueryKey: [key],\n\t\tqueryFn: async ({ queryKey: [key] }) => {\n\t\t\tif (userDirectoryUrl === undefined) return Promise.resolve(initialData)\n\t\t\tconst response = await fetch(key, { credentials: 'include' })\n\n\t\t\tif (\n\t\t\t\tresponse.headers.get('Content-Type')?.startsWith('application/json')\n\t\t\t) {\n\t\t\t\tconst parsedData: UserMetadata = (await response.json()) as any\n\t\t\t\treturn {\n\t\t\t\t\t...parsedData,\n\t\t\t\t\tdisplayName: `${parsedData.firstName} ${parsedData.lastName}`,\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn initialData\n\t\t},\n\t})\n}\n"],
  "mappings": ";;;;;;;;;;;AAEA,IAAI,aAAa;AACjB,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EACA;AACA,cAAY,IAAI,eAAe;AAC/B;AAcO,SAAS,gBAAgB,OAAe;AAC9C,QAAM,EAAE,iBAAiB,IAAI,iBAAgD;AAC7E,QAAM,SAAS,IAAI,gBAAgB,EAAE,MAAM,CAAC;AAE5C,QAAM,MAAM,GAAG,oBAAoB;AAEnC,QAAM,cAA4B;AAAA,IACjC,aAAa;AAAA,EACd;AAEA,SAAO,SAAS;AAAA,IACf;AAAA,IACA,UAAU,CAAC,GAAG;AAAA,IACd,SAAS,OAAO,EAAE,UAAU,CAACA,IAAG,EAAE,MAAM;AAnC1C;AAoCG,UAAI,qBAAqB;AAAW,eAAO,QAAQ,QAAQ,WAAW;AACtE,YAAM,WAAW,MAAM,MAAMA,MAAK,EAAE,aAAa,UAAU,CAAC;AAE5D,WACC,cAAS,QAAQ,IAAI,cAAc,MAAnC,mBAAsC,WAAW,qBAChD;AACD,cAAM,aAA4B,MAAM,SAAS,KAAK;AACtD,eAAO;AAAA,UACN,GAAG;AAAA,UACH,aAAa,GAAG,WAAW,aAAa,WAAW;AAAA,QACpD;AAAA,MACD;AACA,aAAO;AAAA,IACR;AAAA,EACD,CAAC;AACF;",
  "names": ["key"]
}
