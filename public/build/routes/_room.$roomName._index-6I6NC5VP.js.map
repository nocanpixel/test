{
  "version": 3,
  "sources": ["../../../app/routes/_room.$roomName._index.tsx", "../../../app/components/CopyButton.tsx", "../../../app/components/SelfView.tsx"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/routes/_room.$roomName._index.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/routes/_room.$roomName._index.tsx\");\n  import.meta.hot.lastModified = \"1712808153531.187\";\n}\n// REMIX HMR END\n\nimport { VisuallyHidden } from '@radix-ui/react-visually-hidden';\nimport { json } from '@remix-run/cloudflare';\nimport { useNavigate, useParams } from '@remix-run/react';\nimport invariant from 'tiny-invariant';\nimport { AudioIndicator } from '~/components/AudioIndicator';\nimport { Button } from '~/components/Button';\nimport { CameraButton } from '~/components/CameraButton';\nimport { CopyButton } from '~/components/CopyButton';\nimport { Disclaimer } from '~/components/Disclaimer';\nimport { Icon } from '~/components/Icon/Icon';\nimport { MicButton } from '~/components/MicButton';\nimport { SelfView } from '~/components/SelfView';\nimport { SettingsButton } from '~/components/SettingsDialog';\nimport { Tooltip } from '~/components/Tooltip';\nimport { useRoomContext } from '~/hooks/useRoomContext';\nimport { errorMessageMap } from '~/hooks/useUserMedia';\nimport getUsername from '~/utils/getUsername.server';\nexport const loader = async ({\n  request\n}) => {\n  const username = await getUsername(request);\n  invariant(username);\n  return json({\n    username\n  });\n};\nexport default function Lobby() {\n  _s();\n  const {\n    roomName\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    setJoined,\n    userMedia,\n    room\n  } = useRoomContext();\n  const {\n    videoStreamTrack,\n    audioStreamTrack,\n    audioEnabled\n  } = userMedia;\n  const joinedUsers = new Set(room.otherUsers.filter(u => u.tracks.audio).map(u => u.name)).size;\n  const audioUnavailableMessage = userMedia.audioUnavailableReason ? errorMessageMap[userMedia.audioUnavailableReason] : null;\n  return <div className=\"flex flex-col items-center justify-center h-full p-4\">\n\t\t\t<div className=\"flex-1\"></div>\n\t\t\t<div className=\"space-y-4 w-96\">\n\t\t\t\t<div>\n\t\t\t\t\t<h1 className=\"text-3xl font-bold\">{roomName}</h1>\n\t\t\t\t\t<p className=\"text-sm text-zinc-500 dark:text-zinc-400\">\n\t\t\t\t\t\t{`${joinedUsers} ${joinedUsers === 1 ? 'user' : 'users'} in the room.`}{' '}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t<SelfView className=\"aspect-[4/3] w-full\" videoTrack={videoStreamTrack} />\n\t\t\t\t\t{audioStreamTrack && <div className=\"absolute left-3 top-3\">\n\t\t\t\t\t\t\t{audioEnabled ? <AudioIndicator audioTrack={audioStreamTrack} /> : <Tooltip content=\"Mic is turned off\">\n\t\t\t\t\t\t\t\t\t<div className=\"text-white indication-shadow\">\n\t\t\t\t\t\t\t\t\t\t<Icon type=\"micOff\" />\n\t\t\t\t\t\t\t\t\t\t<VisuallyHidden>Mic is turned off</VisuallyHidden>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Tooltip>}\n\t\t\t\t\t\t</div>}\n\t\t\t\t</div>\n\t\t\t\t{(userMedia.audioUnavailableReason || userMedia.videoUnavailableReason) && <div className=\"p-3 rounded-md text-zinc-800 bg-zinc-200 dark:text-zinc-200 dark:bg-zinc-700\">\n\t\t\t\t\t\t{userMedia.audioUnavailableReason === 'NotAllowedError' && userMedia.videoUnavailableReason === undefined && <p>Mic permission was denied.</p>}\n\t\t\t\t\t\t{userMedia.videoUnavailableReason === 'NotAllowedError' && userMedia.audioUnavailableReason === undefined && <p>Camera permission was denied.</p>}\n\t\t\t\t\t\t{userMedia.audioUnavailableReason === 'NotAllowedError' && userMedia.videoUnavailableReason === 'NotAllowedError' && <p>Mic and camera permissions were denied.</p>}\n\t\t\t\t\t\t{userMedia.audioUnavailableReason === 'NotAllowedError' && <p>\n\t\t\t\t\t\t\t\tEnable permission\n\t\t\t\t\t\t\t\t{userMedia.audioUnavailableReason && userMedia.videoUnavailableReason ? 's' : ''}{' '}\n\t\t\t\t\t\t\t\tand reload the page to join.\n\t\t\t\t\t\t\t</p>}\n\t\t\t\t\t</div>}\n\t\t\t\t<div className=\"flex gap-4 text-sm\">\n\t\t\t\t\t{audioUnavailableMessage ? <Tooltip content=\"Unable to join without a mic.\">\n\t\t\t\t\t\t\t<Button disabled>Join</Button>\n\t\t\t\t\t\t</Tooltip> : <Button onClick={() => {\n          setJoined(true);\n          // we navigate here with javascript instead of an a\n          // tag because we don't want it to be possible to join\n          // the room without the JS having loaded\n          navigate('room');\n        }}>\n\t\t\t\t\t\t\tJoin\n\t\t\t\t\t\t</Button>}\n\t\t\t\t\t<MicButton />\n\t\t\t\t\t<CameraButton />\n\t\t\t\t\t<SettingsButton />\n\t\t\t\t\t<CopyButton></CopyButton>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"flex flex-col justify-end flex-1\">\n\t\t\t\t<Disclaimer className=\"pt-6\" />\n\t\t\t</div>\n\t\t</div>;\n}\n_s(Lobby, \"VQjz5zjY3v28l32Mry1NDYK/7Ng=\", false, function () {\n  return [useParams, useNavigate, useRoomContext];\n});\n_c = Lobby;\nvar _c;\n$RefreshReg$(_c, \"Lobby\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/CopyButton.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/CopyButton.tsx\");\n  import.meta.hot.lastModified = \"1712808153523.014\";\n}\n// REMIX HMR END\n\nimport { VisuallyHidden } from '@radix-ui/react-visually-hidden';\nimport { useState } from 'react';\nimport { useTimeoutFn } from 'react-use';\nimport { useRoomUrl } from '~/hooks/useRoomUrl';\nimport { Button } from './Button';\nimport { Icon } from './Icon/Icon';\nimport { Tooltip } from './Tooltip';\nexport const CopyButton = () => {\n  _s();\n  const [copied, setCopied] = useState(false);\n  const roomUrl = useRoomUrl();\n  const [_isReady, _cancel, reset] = useTimeoutFn(() => {\n    setCopied(false);\n  }, 2000);\n  return <Tooltip content={copied ? 'Copied!' : 'Copy URL'} open={copied ? true : undefined}>\n\t\t\t<Button displayType=\"secondary\" onClick={() => {\n      navigator.clipboard.writeText(roomUrl);\n      setCopied(true);\n      reset();\n    }}>\n\t\t\t\t<Icon type={copied ? 'ClipboardDocumentCheckIcon' : 'ClipboardDocumentIcon'} className=\"text-xl\" />\n\t\t\t\t<VisuallyHidden>{copied ? 'Copied!' : 'Copy URL'}</VisuallyHidden>\n\t\t\t</Button>\n\t\t</Tooltip>;\n};\n_s(CopyButton, \"b/x0huzFgfdDFQ/w2hZKmQ6uF7Q=\", false, function () {\n  return [useRoomUrl, useTimeoutFn];\n});\n_c = CopyButton;\nvar _c;\n$RefreshReg$(_c, \"CopyButton\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/SelfView.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/SelfView.tsx\");\n  import.meta.hot.lastModified = \"1712808153526.0962\";\n}\n// REMIX HMR END\n\nimport { forwardRef } from 'react';\nimport { cn } from '~/utils/style';\nimport { VideoSrcObject } from './VideoSrcObject';\nexport const SelfView = forwardRef(_c = ({\n  className,\n  ...rest\n}, ref) => <VideoSrcObject className={cn('-scale-x-100', className)} muted {...rest} ref={ref} />);\n_c2 = SelfView;\nSelfView.displayName = 'SelfView';\nvar _c, _c2;\n$RefreshReg$(_c, \"SelfView$forwardRef\");\n$RefreshReg$(_c2, \"SelfView\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": "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",
  "names": ["import_react", "import_jsx_dev_runtime", "_c", "_c2", "import_jsx_dev_runtime", "_s", "_s", "_c"]
}
